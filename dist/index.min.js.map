{"version":3,"file":"index.min.js","sources":["../src/utils.js","../src/helpers/event-handlers.js","../src/helpers/re-renders.js","../src/index.js","../src/watcher.js","../src/helpers/index.js"],"sourcesContent":["let counter = 1;\n\nexport default {\n  findWatcher: id => document.querySelector(`[data-rbs-watch=\"${id}\"]`),\n  wrapWatcher: (id, html, hash) => {\n    const { tag, ...props } = { ...{ tag: \"span\", class: \"rbs-watch\" }, ...hash };\n    const propStr = Object.entries(props)\n      .map(([key, val]) => `${key}=\"${val}\"`)\n      .join(\" \");\n\n    const style = !html.length ? \"style='display:none;'\" : \"\";\n\n    return `<${tag} ${propStr} ${style} data-rbs-watch=\"${id}\">${html}</${tag}>`;\n  },\n\n  tagComponent(appId, id, html, name) {\n    const $tmp = document.createElement(\"div\");\n    $tmp.innerHTML = html;\n    const $root = $tmp.firstElementChild;\n    if ($tmp.children.length > 1 || $root.dataset.rbsWatch)\n      throw new Error(`component:'${name}' must have one root node, and cannot be a {{#watch}}`);\n\n    $root.dataset.rbsComp = id;\n    return $tmp.innerHTML;\n  },\n\n  findComponent: id => document.querySelector(`[data-rbs-comp=\"${id}\"]`),\n\n  findRefs(parent) {\n    const $el = typeof parent === \"object\" ? parent : this.findComponent(parent);\n\n    return Array.from($el.querySelectorAll(\"[data-rbs-ref]\")).reduce((obj, $el) => {\n      const key = $el.dataset.rbsRef;\n      const target = obj[$el.dataset.rbsRef];\n      obj[key] = target ? [target].concat($el) : $el;\n      return obj;\n    }, {});\n  },\n\n  findByPath: (data, path) => path.split(\".\").reduce((pointer, seg) => pointer[seg], data),\n  getPath: (appId, compId) => `rbs.apps.${appId}.comp.${compId}`,\n\n  shouldRender(path, watch) {\n    const watchPaths = Array.isArray(watch) ? watch : [watch];\n    return watchPaths.some(watchPath => {\n      if (path === watchPath || watchPath === \".*\") return true;\n\n      const pathSegs = path.split(\".\");\n      const watchSegs = watchPath.split(\".\");\n\n      return watchSegs.every((seg, index) => {\n        if (seg === pathSegs[index] || seg === \"*\") return true;\n        return false;\n      });\n    });\n  },\n\n  randomId: () => `rbs${counter++}`,\n\n  setKey(obj, path, value) {\n    const arr = path.split(\".\");\n    arr.reduce((pointer, key, index) => {\n      if (!(key in pointer)) throw new Error(`${path} was not found in object`, obj);\n      if (index + 1 === arr.length) pointer[key] = value;\n      return pointer[key];\n    }, obj);\n  },\n};\n","import Utils from \"../utils.js\";\n\nexport default function(storage, { data, instance, methods, id, props, app, name }) {\n  const handlerPath = `${Utils.getPath(app.id, id)}.ev`;\n\n  function _handler() {\n    const [str, ...args] = arguments;\n    const [methodName, eventType = \"click\"] = str.split(\":\");\n    args.splice(-1, 1);\n\n    const params = [methodName].concat(args).map(param => {\n      if (param !== null && typeof parm === \"object\")\n        throw new Error(\n          `must only pass primitives as argument to a handler. ${JSON.stringify(args, null, 2)}`\n        );\n      if (typeof param === \"string\") return `'${param}'`;\n      return param;\n    });\n\n    return new instance.SafeString(\n      `on${eventType}=\"${handlerPath}.method(event,${params.join(\",\")})\"`\n    );\n  }\n\n  storage.ev.bind = (event, path) => Utils.setKey(data, path, event.target.value);\n\n  storage.ev.method = function() {\n    const [event, key, ...args] = arguments;\n\n    if (!(key in methods))\n      throw new Error(`${key} was not found in methods for component '${name}'`);\n\n    return methods[key].call(\n      methods,\n      { data, props, methods, $refs: Utils.findRefs(id) },\n      event,\n      ...args\n    );\n  };\n\n  instance.registerHelper(\"method\", _handler);\n  instance.registerHelper(\"bind\", (path, { hash = {} }) => {\n    const val = Utils.findByPath(data, path);\n    const ref = hash.ref || path;\n    return new instance.SafeString(\n      `value=\"${val}\" data-rbs-ref=\"${ref}\" oninput=\"${handlerPath}.bind(event, '${path}')\"`\n    );\n  });\n}\n","import Utils from \"../utils.js\";\n\nexport default function(storage, { instance, name }) {\n  const _getPath = (target, wildcard = true) => {\n    if (target === undefined)\n      throw new Error(`have passed undefined to watch helper in component '${name}'`);\n    return typeof target === \"object\" ? `${target.ReBarsPath}${wildcard ? \".*\" : \"\"}` : target;\n  };\n\n  const _watch = (path, render) => {\n    const eId = Utils.randomId();\n    storage.renders[eId] = {\n      path,\n      render,\n    };\n    return eId;\n  };\n\n  instance.registerHelper(\"debug\", function(obj) {\n    const render = () => `<pre class=\"debug\">${JSON.stringify(obj, null, 2)}</pre>`;\n    const eId = _watch(_getPath(obj), render);\n    return new instance.SafeString(Utils.wrapWatch(eId, render()));\n  });\n\n  instance.registerHelper(\"watch\", function(...args) {\n    const { fn, hash } = args.pop();\n\n    const path = args\n      .map(arg => _getPath(arg, false))\n      .join(\".\")\n      .split(\",\");\n\n    const eId = _watch(path, () => fn(this));\n    return Utils.wrapWatcher(eId, fn(this), hash);\n  });\n}\n","import Watcher from \"./watcher.js\";\nimport Helpers from \"./helpers/index.js\";\nimport Utils from \"./utils.js\";\n\nexport default function({ $el, root, Handlebars = window.Handlebars }) {\n  if (!Handlebars) throw new Error(\"ReBars need Handlebars in order to run!\");\n\n  window.ReBars = window.ReBars || {};\n  window.ReBars.apps = window.ReBars.apps || {};\n  window.rbs = window.ReBars;\n\n  const appId = Utils.randomId();\n  const storage = (window.ReBars.apps[appId] = { comp: {} });\n  const app = { component, id: appId, storage };\n\n  if (!document.body.contains($el)) throw new Error(\"$el must be present in the document\");\n\n  $el.innerHTML = component(root);\n\n  function component({\n    template,\n    methods = {},\n    props = {},\n    name,\n    components = {},\n    data: rawData,\n    watchers = {},\n    helpers = {},\n  }) {\n    const id = Utils.randomId();\n    const instance = Handlebars.create();\n\n    if (!name) throw new Error(\"Each ReBars component should have a name\");\n\n    storage.comp[id] = {\n      renders: {},\n      ev: {},\n      name,\n    };\n\n    const proxyData = Watcher({ id, app, props, methods, rawData, watchers, name });\n    const templateFn = instance.compile(template);\n\n    Helpers({\n      props,\n      methods,\n      id,\n      components,\n      instance,\n      helpers,\n      data: proxyData,\n      name,\n      app,\n    });\n\n    return Utils.tagComponent(app.id, id, templateFn(proxyData), name);\n  }\n\n  return {\n    id: appId,\n    component,\n    storage,\n  };\n}\n","import Utils from \"./utils.js\";\n\nexport default function({ id, app, props = {}, methods, rawData = {}, watchers = {}, name }) {\n  const cRef = app.storage.comp[id];\n\n  // the handling of change\n\n  function _handler(path) {\n    Object.entries(watchers).forEach(([watch, fn]) => {\n      if (Utils.shouldRender(path, watch)) fn({ data: proxyData, props, methods });\n    });\n\n    Object.entries(cRef.renders).forEach(([eId, handler]) => {\n      if (Utils.shouldRender(path, handler.path)) {\n        const $target = Utils.findWatcher(eId);\n        if ($target) {\n          const html = handler.render();\n          const $active = document.activeElement;\n          const activeRef = {\n            ref: $active.dataset.rbsRef,\n            pos: $active.selectionStart,\n          };\n\n          if ($target.innerHTML !== html) {\n            $target.removeAttribute(\"style\");\n            $target.innerHTML = html;\n            console.log(\"ReBars: re-render\", $target, `${name}: ${path}`);\n            const $input = Utils.findRefs($target)[activeRef.ref];\n\n            if ($input) {\n              if (Array.isArray($input)) {\n                console.warn(\n                  `component:${name} ref ${activeRef.ref} is used more than once. The focus cannot be restored. If using bind, add a ref=\"uniqeName\" to each`\n                );\n              } else {\n                $input.focus();\n                if (activeRef.pos) $input.setSelectionRange(activeRef.pos + 1, activeRef.pos + 1);\n              }\n            }\n          }\n        } else {\n          delete cRef.renders[eId];\n        }\n      }\n    });\n\n    Object.keys(app.storage.comp).forEach(cId => {\n      if (!Utils.findComponent(cId)) {\n        // will fire destory hook here...\n        delete app.storage.comp[cId];\n      }\n    });\n  }\n\n  // the proxy building\n\n  function _buildProxy(raw, tree = []) {\n    return new Proxy(raw, {\n      get: function(target, prop) {\n        if (prop === \"ReBarsPath\") return tree.join(\".\");\n        const value = Reflect.get(...arguments);\n        if (value !== null && typeof value === \"object\" && prop !== \"methods\")\n          return _buildProxy(value, tree.concat(prop));\n        else return value;\n      },\n\n      set: function(target, prop) {\n        const ret = Reflect.set(...arguments);\n        _handler(tree.concat(prop).join(\".\"));\n        return ret;\n      },\n\n      deleteProperty: function(target, prop) {\n        const ret = Reflect.deleteProperty(...arguments);\n        _handler(tree.concat(prop).join(\".\"));\n        return ret;\n      },\n    });\n  }\n\n  const proxyData = _buildProxy({ ...rawData, ...props });\n  return proxyData;\n}\n","import EventHandlers from \"./event-handlers.js\";\nimport ReRenders from \"./re-renders.js\";\n\nexport default function({ instance, app, id, components, helpers, name }) {\n  const storage = app.storage.comp[id];\n\n  ReRenders(storage, ...arguments);\n  EventHandlers(storage, ...arguments);\n\n  instance.registerHelper(\"component\", function(cName, { hash: props }) {\n    Object.entries(props).forEach(([key, val]) => {\n      if (typeof val === \"function\")\n        throw new Error(\n          `cannot pass a function as a prop. in '${name}' child '${cName}' prop '${key}'`\n        );\n    });\n\n    return new instance.SafeString(\n      app.component({\n        ...components[cName],\n        ...{ props },\n      })\n    );\n  });\n\n  Object.entries(helpers).forEach(([name, fn]) => instance.registerHelper(name, fn));\n  instance.registerHelper(\"ref\", key => new instance.SafeString(`data-rbs-ref=\"${key}\"`));\n}\n"],"names":["counter","findWatcher","id","document","querySelector","wrapWatcher","html","hash","tag","props","class","Object","entries","map","key","val","join","length","[object Object]","appId","name","$tmp","createElement","innerHTML","$root","firstElementChild","children","dataset","rbsWatch","Error","rbsComp","findComponent","parent","$el","this","Array","from","querySelectorAll","reduce","obj","rbsRef","target","concat","findByPath","data","path","split","pointer","seg","getPath","compId","shouldRender","watch","isArray","some","watchPath","pathSegs","every","index","randomId","value","arr","storage","instance","methods","app","handlerPath","Utils","ev","bind","event","setKey","method","args","arguments","call","$refs","findRefs","registerHelper","str","methodName","eventType","splice","params","param","parm","JSON","stringify","SafeString","ref","_getPath","wildcard","undefined","ReBarsPath","_watch","render","eId","renders","wrapWatch","fn","pop","arg","root","Handlebars","window","ReBars","apps","rbs","comp","component","body","contains","template","components","rawData","watchers","helpers","create","proxyData","cRef","_handler","forEach","handler","$target","$active","activeElement","activeRef","pos","selectionStart","removeAttribute","$input","focus","setSelectionRange","keys","cId","_buildProxy","raw","tree","Proxy","get","prop","Reflect","set","ret","deleteProperty","Watcher","templateFn","compile","ReRenders","EventHandlers","cName","Helpers","tagComponent"],"mappings":"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"}