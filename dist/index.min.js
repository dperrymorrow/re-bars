!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Vbars=t()}(this,(function(){"use strict";var e={isKeyedNode:e=>!!e.children.length&&Array.from(e.children).every(e=>e.dataset.key),keyedChildren:e=>Array.from(e.children).filter(e=>e.dataset.key),swapNodes(e,t){const r=e.cloneNode(!0);return t.parentNode.replaceChild(r,t),r},addChild(e,t){const r=t.cloneNode(!0);return e.appendChild(r),r},setKey(e,t,r){const n=t.split(".");n.reduce((a,o,d)=>{if(!(o in a))throw new Error(`${t} was not found in object`,e);return d+1===n.length&&(a[o]=r),a[o]},e)}};function t({$root:t,methods:r,proxyData:n}){return{add(a){a.querySelectorAll("[data-vbars-handler]").forEach(e=>{const[o,...d]=JSON.parse(e.dataset.vbarsHandler),[c,s]=o.split(":");let[i,...l]=c.split(".");if(!(s in r))throw new Error(`"${s}" not in Vbars component's methods. Availible methods: ${Object.keys(r).join(", ")}`);e.addEventListener(i,e=>{l.includes("prevent")&&(e.stopPropagation(),e.preventDefault()),r[s]({event:e,data:n,$root:t,$container:a},...d)}),delete e.dataset.vbarsHandler}),a.querySelectorAll("[data-vbars-bind]").forEach(t=>{t.addEventListener("input",r=>{e.setKey(n,t.dataset.vbarsBind,r.currentTarget.value)})})}}}var r={register(e){e.registerHelper("watch",(t,r)=>{const n=`${r.loc.start.column}${r.loc.start.line}${r.loc.end.column}${r.loc.end.line}`;return new e.SafeString(`data-vbars-id="${n}" data-vbars-watch="${t}"`)}),e.registerHelper("handler",(function(){const t=Array.from(arguments);return t.splice(-1,1),new e.SafeString(`data-vbars-handler='${JSON.stringify(t)}'`)})),e.registerHelper("isChecked",(function(t){return new e.SafeString(t?"checked":"")}))}};return{create({template:n,data:a,methods:o={}}){let d,c;const s=window.Handlebars.create(),i=function e(t,r,n=[]){return new Proxy(t,{get:function(t,a){const o=Reflect.get(...arguments);return null!==o&&"object"==typeof o&&"methods"!==a?e(o,r,n.concat(a)):o},set:function(e,t){const a=Reflect.set(...arguments);return r({path:n.concat(t).join(".")}),a},deleteProperty:function(e,t){const a=Reflect.deleteProperty(...arguments);return r({path:n.concat(t).join(".")}),a}})}(a,({path:e})=>c.patch(d,e));r.register(s,i);const l=s.compile(n);return{instance:s,data:i,render(r){d=r,c=function({$root:r,templateFn:n,proxyData:a}){const o=document.createElement("div"),d=t(...arguments),c=()=>o.innerHTML=n(a);function s(){c(),r.innerHTML=o.innerHTML,d.add(r)}function i(t,r){e.keyedChildren(r).forEach(r=>{const n=t.querySelector(`[data-key="${r.dataset.key}"]`);n?n.isEqualNode(r)||d.add(e.swapNodes(n,r)):r.remove()}),e.keyedChildren(t).forEach(t=>{r.querySelector(`[data-key="${t.dataset.key}"]`)||d.add(e.addChild(r,t))})}function l(t,r){c(),Array.from(o.querySelectorAll("[data-vbars-watch]")).filter(e=>r.startsWith(e.dataset.vbarsWatch)).forEach(r=>{const n=t.querySelector(`[data-vbars-id="${r.dataset.vbarsId}"]`);e.isKeyedNode(r)?i(r,n):d.add(e.swapNodes(r,n))})}return{$el:o,render:c,replace:s,patch:l}}({$root:d,templateFn:l,proxyData:i,methods:o}),c.replace()}}}}}));
//# sourceMappingURL=index.min.js.map
